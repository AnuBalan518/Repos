"use strict";(self.webpackChunkverona_ng=self.webpackChunkverona_ng||[]).push([[8282],{8282:(Q,Z,l)=>{l.r(Z),l.d(Z,{ProfileListModule:()=>B});var p=l(6814),m=l(4480),g=l(707),f=l(3714),u=l(9552),y=l(6651),h=l(2129);function a(){const i=(new Date).toISOString();return{id:0,name:"",type:"",uinNumber:"",intermediary:"",frequency:"",ageAtEntry:0,maturityAge:0,premiumTerm:0,limitedPremiumTerm:0,policyTerm:0,installmentType:"",installmentPremium:"",singlePremium:0,annuityPurchasePrice:0,sumAssured:0,productLaunchDate:i,productExitDate:i,clawback:"",createdAt:i,updatedAt:i,approvalStatus:"",status:""}}var t=l(9467),C=l(981),d=l(5219),b=l(1786),_=l(3530),T=l(3722),A=l(4104),x=l(6340);function v(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",17)(1,"button",18),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.openNew())}),t.qZA(),t.TgZ(2,"button",19),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deleteSelectedProducts())}),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(2),t.Q6J("disabled",!e.selectedProducts||!e.selectedProducts.length)}}function U(i,c){if(1&i){const e=t.EpF();t._UZ(0,"p-fileUpload",20),t.TgZ(1,"button",21),t.NdJ("click",function(){t.CHM(e),t.oxw();const o=t.MAs(8);return t.KtG(o.exportCSV())}),t.qZA()}2&i&&t.Q6J("maxFileSize",1e6)}function q(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",22)(1,"h5",23),t._uU(2,"Manage Products"),t.qZA(),t.TgZ(3,"span",24),t._UZ(4,"i",25),t.TgZ(5,"input",26),t.NdJ("input",function(o){t.CHM(e);const s=t.oxw(),r=t.MAs(8);return t.KtG(s.onGlobalFilter(r,o))}),t.qZA()()()}}function w(i,c){1&i&&(t.TgZ(0,"tr"),t._UZ(1,"th",27),t.TgZ(2,"th",27),t._UZ(3,"p-tableHeaderCheckbox"),t.qZA(),t.TgZ(4,"th",28),t._uU(5,"Name "),t._UZ(6,"p-sortIcon",29),t.qZA(),t.TgZ(7,"th",30),t._uU(8,"Type "),t._UZ(9,"p-sortIcon",31),t.qZA(),t.TgZ(10,"th",32),t._uU(11,"Frequency "),t._UZ(12,"p-sortIcon",33),t.qZA(),t.TgZ(13,"th",34),t._uU(14,"Premium Term "),t._UZ(15,"p-sortIcon",35),t.qZA(),t.TgZ(16,"th",36),t._uU(17,"Installment Type "),t._UZ(18,"p-sortIcon",37),t.qZA(),t.TgZ(19,"th",38),t._uU(20,"Installment Premium "),t._UZ(21,"p-sortIcon",39),t.qZA(),t.TgZ(22,"th",40),t._uU(23,"Sum Assured "),t._UZ(24,"p-sortIcon",41),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Actions"),t.qZA()())}function S(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"a",42),t.NdJ("click",function(o){const r=t.CHM(e).$implicit,z=t.oxw();return t.KtG(z.toggleRowExpansion(r,o))}),t._UZ(3,"i",43),t.qZA()(),t.TgZ(4,"td"),t._UZ(5,"p-tableCheckbox",44),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td")(21,"div",45)(22,"button",46),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.editProduct(s))}),t.qZA(),t.TgZ(23,"button",47),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.deleteProduct(s))}),t.qZA()()()()}if(2&i){const e=c.$implicit,n=t.oxw();t.xp6(3),t.Q6J("ngClass",n.expandedRowKeys[e.id]?"pi pi-chevron-down":"pi pi-chevron-right"),t.xp6(2),t.Q6J("value",e),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.type),t.xp6(2),t.Oqu(e.frequency),t.xp6(2),t.Oqu(e.premiumTerm),t.xp6(2),t.Oqu(e.installmentType),t.xp6(2),t.Oqu(e.installmentPremium),t.xp6(2),t.Oqu(e.sumAssured)}}function D(i,c){if(1&i&&(t.TgZ(0,"tr")(1,"td",48)(2,"div",49)(3,"table",50)(4,"tr")(5,"td")(6,"strong"),t._uU(7,"ID:"),t.qZA()(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td")(11,"strong"),t._uU(12,"UIN Number:"),t.qZA()(),t.TgZ(13,"td"),t._uU(14),t.qZA()(),t.TgZ(15,"tr")(16,"td")(17,"strong"),t._uU(18,"Age at Entry:"),t.qZA()(),t.TgZ(19,"td"),t._uU(20),t.qZA(),t.TgZ(21,"td")(22,"strong"),t._uU(23,"Approval Status:"),t.qZA()(),t.TgZ(24,"td"),t._uU(25),t.qZA()(),t.TgZ(26,"tr")(27,"td")(28,"strong"),t._uU(29,"Clawback:"),t.qZA()(),t.TgZ(30,"td"),t._uU(31),t.qZA(),t.TgZ(32,"td")(33,"strong"),t._uU(34,"Product Launch Date:"),t.qZA()(),t.TgZ(35,"td"),t._uU(36),t.ALo(37,"date"),t.qZA()(),t.TgZ(38,"tr")(39,"td")(40,"strong"),t._uU(41,"Product Exit Date:"),t.qZA()(),t.TgZ(42,"td"),t._uU(43),t.ALo(44,"date"),t.qZA(),t.TgZ(45,"td")(46,"strong"),t._uU(47,"Annuity Purchase Price:"),t.qZA()(),t.TgZ(48,"td"),t._uU(49),t.ALo(50,"currency"),t.qZA()()()()()()),2&i){const e=c.$implicit;t.xp6(9),t.hij("",e.id,"\xa0\xa0\xa0\xa0"),t.xp6(5),t.hij("",e.uinNumber,"\xa0\xa0\xa0\xa0"),t.xp6(6),t.hij("",e.ageAtEntry,"\xa0\xa0\xa0\xa0"),t.xp6(5),t.hij("",e.approvalStatus||"Pending","\xa0\xa0\xa0\xa0"),t.xp6(6),t.Oqu(e.clawback),t.xp6(5),t.hij("",t.xi3(37,8,e.productLaunchDate,"yyyy-MM-dd"),"\xa0\xa0\xa0\xa0"),t.xp6(7),t.hij("",t.xi3(44,11,e.productExitDate,"yyyy-MM-dd"),"\xa0\xa0\xa0\xa0"),t.xp6(6),t.hij("",t.xi3(50,14,e.annuityPurchasePrice,"INR"),"\xa0\xa0\xa0\xa0")}}function L(i,c){if(1&i&&(t.TgZ(0,"span"),t._uU(1,"Are you sure you want to delete "),t.TgZ(2,"b"),t._uU(3),t.qZA(),t._uU(4,"?"),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.Oqu(e.product.name)}}function N(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"button",51),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deleteProductDialog=!1)}),t.qZA(),t.TgZ(1,"button",52),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.confirmDelete())}),t.qZA()}}function M(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"button",51),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deleteProductsDialog=!1)}),t.qZA(),t.TgZ(1,"button",52),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.confirmDeleteSelected())}),t.qZA()}}const R=()=>["name","type","frequency","premiumTerm","installmentType","installmentPremium","sumAssured"],K=()=>[10,20,30],P=()=>({width:"450px"});let I=(()=>{class i{constructor(e,n,o,s,r){this.router=e,this.productService=n,this.messageService=o,this.confirmationService=s,this.profileService=r,this.customers=[],this.expandedRowKeys={},this.cols=[{field:"name",header:"Name"},{field:"type",header:"Type"},{field:"frequency",header:"Frequency"},{field:"premiumTerm",header:"Premium Term"},{field:"installmentType",header:"Installment Type"},{field:"installmentPremium",header:"Installment Premium"},{field:"sumAssured",header:"Sum Assured"},{field:"actions",header:"Actions"}],this.productDialog=!1,this.deleteProductDialog=!1,this.deleteProductsDialog=!1,this.products=[],this.product=a(),this.selectedProducts=[],this.submitted=!1,this.statuses=[],this.rowsPerPageOptions=[5,10,20]}ngOnInit(){console.log("List"),this.profileService.getProductTypes().subscribe(e=>{this.products=e}),console.log(this.products),this.statuses=[{label:"INSTOCK",value:"instock"},{label:"LOWSTOCK",value:"lowstock"},{label:"OUTOFSTOCK",value:"outofstock"}]}openNew(){this.product=a(),this.submitted=!1,this.router.navigate(["profile/create"])}deleteSelectedProducts(){this.deleteProductsDialog=!0}editProduct(e){this.product={...a(),...e},this.router.navigate(["profile/update",this.product.id])}deleteProduct(e){this.deleteProductDialog=!0,this.product={...a(),...e}}confirmDeleteSelected(){this.deleteProductsDialog=!1,this.products=this.products.filter(n=>!this.selectedProducts.includes(n)),this.selectedProducts.map(n=>n.id).forEach(n=>{this.profileService.deleteProductType(n).subscribe({next:()=>{console.log(`Product with ID ${n} deleted successfully`),this.products=this.products.filter(o=>o.id!==n)},error:o=>{console.error(`Error deleting product with ID ${n}:`,o)}})}),this.selectedProducts=[],this.messageService.add({severity:"success",summary:"Successful",detail:"Products Deleted",life:3e3}),this.selectedProducts=[]}confirmDelete(){this.deleteProductDialog=!1,this.products=this.products.filter(e=>e.id!==this.product.id),this.profileService.deleteProductType(this.product.id).subscribe({next:()=>{console.log("ProductType deleted successfully")},error:e=>{console.error("Error deleting ProductType:",e)}}),this.messageService.add({severity:"success",summary:"Successful",detail:"Product Deleted",life:3e3}),this.product=a()}hideDialog(){this.productDialog=!1,this.submitted=!1}saveProduct(){}findIndexById(e){let n=-1;for(let o=0;o<this.products.length;o++)if(this.products[o].id===e){n=o;break}return n}createId(){let e="";for(let o=0;o<5;o++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return e}onGlobalFilter(e,n){e.filterGlobal(n.target.value,"contains")}onExpandedRowKeysChange(e){this.expandedRowKeys=e}toggleRowExpansion(e,n){console.log(e),n.preventDefault(),this.expandedRowKeys[e.id]=!this.expandedRowKeys[e.id]}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(h.F0),t.Y36(C.M),t.Y36(d.ez),t.Y36(d.YP),t.Y36(b.H))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],decls:24,vars:23,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","id","expandableRows","",3,"value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","selection","rowHover","expandedRowKeys","selectionChange","expandedRowKeysChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],["pTemplate","footer"],[1,"my-2"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pButton","","pRipple","","label","Delete","icon","pi pi-trash",1,"p-button-danger",3,"disabled","click"],["mode","basic","accept","image/*","label","Import","chooseLabel","Import",1,"mr-2","inline-block",3,"maxFileSize"],["pButton","","pRipple","","label","Export","icon","pi pi-upload",1,"p-button-help",3,"click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",1,"w-full","sm:w-auto",3,"input"],[2,"width","3rem"],["pSortableColumn","name"],["field","name"],["pSortableColumn","type"],["field","type"],["pSortableColumn","frequency"],["field","frequency"],["pSortableColumn","premiumTerm"],["field","premiumTerm"],["pSortableColumn","installmentType"],["field","installmentType"],["pSortableColumn","installmentPremium"],["field","installmentPremium"],["pSortableColumn","sumAssured"],["field","sumAssured"],["href","#",3,"click"],[3,"ngClass"],[3,"value"],[1,"flex"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning",3,"click"],["colspan","20"],[1,"expanded-content"],[1,"table"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"p-toast"),t.TgZ(4,"p-toolbar",3),t.YNc(5,v,3,1,"ng-template",4)(6,U,2,1,"ng-template",5),t.qZA(),t.TgZ(7,"p-table",6,7),t.NdJ("selectionChange",function(r){return o.selectedProducts=r})("expandedRowKeysChange",function(r){return o.onExpandedRowKeysChange(r)}),t.YNc(9,q,6,0,"ng-template",8)(10,w,27,0,"ng-template",9)(11,S,24,9,"ng-template",10)(12,D,51,17,"ng-template",11),t.qZA()(),t.TgZ(13,"p-dialog",12),t.NdJ("visibleChange",function(r){return o.deleteProductDialog=r}),t.TgZ(14,"div",13),t._UZ(15,"i",14),t.YNc(16,L,5,1,"span",15),t.qZA(),t.YNc(17,N,2,0,"ng-template",16),t.qZA(),t.TgZ(18,"p-dialog",12),t.NdJ("visibleChange",function(r){return o.deleteProductsDialog=r}),t.TgZ(19,"div",13),t._UZ(20,"i",14),t.TgZ(21,"span"),t._uU(22,"Are you sure you want to delete selected products?"),t.qZA()(),t.YNc(23,M,2,0,"ng-template",16),t.qZA()()()),2&n&&(t.xp6(7),t.Q6J("value",o.products)("columns",o.cols)("rows",10)("globalFilterFields",t.DdM(19,R))("paginator",!0)("rowsPerPageOptions",t.DdM(20,K))("showCurrentPageReport",!0)("selection",o.selectedProducts)("rowHover",!0)("expandedRowKeys",o.expandedRowKeys),t.xp6(6),t.Akn(t.DdM(21,P)),t.Q6J("visible",o.deleteProductDialog)("modal",!0),t.xp6(3),t.Q6J("ngIf",o.product),t.xp6(2),t.Akn(t.DdM(22,P)),t.Q6J("visible",o.deleteProductsDialog)("modal",!0))},dependencies:[p.mk,p.O5,m.H,g.Hq,d.jx,f.o,u.iA,u.lQ,u.fz,u.UA,u.Mo,_.V,T.p,A.FN,x.o,p.H9,p.uU],encapsulation:2})}return i})(),J=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#o=this.\u0275inj=t.cJS({imports:[h.Bz.forChild([{path:"",component:I}]),h.Bz]})}return i})();var k=l(9290),F=l(95),O=l(6022),E=l(6218),H=l(3965),j=l(1865),G=l(5167),Y=l(6128);let B=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#o=this.\u0275inj=t.cJS({providers:[d.ez,d.YP],imports:[p.ez,J,m.T,g.hJ,f.j,u.U$,y.q,_.S,p.ez,k.x,u.U$,T.O,F.u5,g.hJ,m.T,A.EV,x.V,O.Xt,f.j,E.A,H.kW,j.cc,G.L$,_.S,Y.Qy]})}return i})()}}]);